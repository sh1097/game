<!DOCTYPE html>
<html>
<head>
	<title>whack a mole</title>
	<link rel="stylesheet" type="text/css" href="mole.css">
</head>
<body>
	<h1>Whack-a-mole</h1>
	
	<span id="score" > Score:0</span></h2>

    <h2>Seconds-left</h2>
    <h2 id="time-left">15</h2>

	<button onclick="setTimeout(stop(), 1000);" > stop</button> 

	<div class="game" id="f1">
		<div class="hole" id="1">
			
		</div>
		<div class="hole" id="2">
			
		</div>
		<div class="hole" id="3">
		
		</div>
		<div class="hole"  id="4">
			
		</div>
		<div class="hole" id="5">
			
		</div>
		<div class="hole" id="6">
			
		</div>
	</div>

</body>
<script > 
		const hole=document.querySelectorAll(".hole");
	    const mole=document.querySelectorAll(".mole");

		let score = document.querySelector("#score");
		const timeleft = document.querySelector("#time-left");
		let result = 0;
		let recentTime = timeleft.textContent;
		var high = { 'highest': 0 }
		var c1= []


	function out()
	{       hole.forEach(className => {
	        className.classList.remove('mole');
	        })
	    let randomPosition = hole[Math.floor(Math.random() * 6)]
	    randomPosition.classList.add('mole');
		 hitpositon = randomPosition.id;

 





   }



	function setcookie() {
    document.cookie = "";
     var expiresAttrib = new Date(Date.now() + 60 * 1000).toString();
    cookieString = "highest" + "=" + high['highest'] + " ; " + expiresAttrib + "; " + "SameSite=Lax";
    document.cookie = cookieString;
    console.log(document.cookie);
   
}

hole.forEach(id => {
    id.addEventListener('click', () => {
        if (id.id === hitpositon) {
            result += 1;
            score.textContent = result;
        }
    })
})

function moveMole() {
    let timerId = null;
    timerId = setInterval(out, 1000);
}


moveMole();



 function getcookie(cname) {
     var c1 = cname.split("=");
     console.log( "Score :"+ c1);
    return c1[1];
 }

 function highest(num) {
   var get = getcookie(document.cookie);
   if (num <= get) {
        if (get == 0) {
           high['highest'] = result;
           setcookie();
       } else {
           console.log(high['highest'])
       }
     } else {
       high['highest'] = result;
         setcookie();
    }
 }

 function countDown() {
     recentTime--
     timeleft.textContent = recentTime

     if (recentTime === 0) {
         clearInterval(timerId)
         highest(result);
        var finalHighest = getcookie(document.cookie);
         alert('Game Over! Your Final Score is ' + result + ', highest score is ' + finalHighest);
    }


   


 }
   let timerId = setInterval(countDown, 1000);





  function stop(){
  	score=0;
  	document.getElementById('score').innerHTML=("score"+" " + 0);
  	document.getElementById('f1').style.display="None";
  		document.getElementById('time-left').style.display="None";
  	document.getElementById('time-left').innerHTML=("time-left"+" " + 0);
  	timeleft.textcontent=0;
  



  }

 


  	
  



</script>
</html>